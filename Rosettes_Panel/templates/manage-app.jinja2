{% extends "layout.jinja2" %}
{% block title %}{{ app['name'] }}{% endblock %}

{% block main %}

    <p><a href="/panel/">Go back</a></p>

    <h2>App information.</h2>

    <p>Your app is called "{{ app['name'] }}". Its ID is #{{ app['id'] }}</p>
    <h3>Users</h3>
    <hr>
    {% for user in users %}
        <p>{{ user['namecache'] }} | username: {{ user['username'] }} | id: {{ user['id'] }}</p>
    {% else %}
        <p>No user has yet approved your application for auth.</p>
    {% endfor %}
    <h3>API Information.</h3>
    <hr>
    <p>Your application's token is: {{ app['token_key'] }}</p>
    <hr>
    <h3>Endpoints</h3>
    <p>Largely WIP, probably unstable.<br>All under https://rosettes.markski.ar/api/</p>
    <ul>
        <li><b>[POST] request</b> - Request authorization from an user. - params: [str]applicationKey, [ulong]userId</li>
        <li><b>[POST] notify</b> - Send message to an user. - params: [str]applicationKey, [ulong]userId, [str]message</li>
        <li><b>[GET] user</b> - Get user data, if authorized. - params: [str]applicationKey, [ulong]userId</li>
    </ul>
    <p>Currently the only way to check if a user accepted auth is by polling 'user'. Eventually this should probably call a webhook on your side, if desired.</p>
{% endblock %}